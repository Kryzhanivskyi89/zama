<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Hidden Performance Bonus â€” Zama FHEVM</title>
  <link rel="stylesheet" href="./index.css" />

</head>
<body>
  <div class="app-shell">
    <header class="app-header">
      <div class="header-icon">ðŸŽ¯</div>
      <div class="header-main">
        <h1 class="app-title">Hidden Performance Bonus</h1>
        <p class="app-subtitle">
          Employees and HR share encrypted KPIs &amp; targets â€” only a bonus level (0â€“3) ever becomes visible.
        </p>
      </div>
      <div class="header-pill">Private KPI Â· HR dApp</div>
    </header>

    <div class="grid">
      <div>
        <!-- Contract card -->
        <div class="card card--contract">
          <div class="card-header">
            <h1><span class="step">Â·</span>Session &amp; Contract</h1>
            <span class="card-tag">Connection</span>
          </div>
          <p class="card-desc">
            Connect your wallet to start a hiddenâ€‘bonus session linked to a specific FHEVM contract.
          </p>
          <p class="card-meta">
            Contract: <code id="contractAddr">0xa863BA651FF504dB9C8Dc7182Af66E4943ca4cCc</code>
          </p>
          <div style="margin-top:10px;">
            <button id="btnConnect" class="btn">Connect Wallet</button>
            <div id="connectStatus" class="status"></div>
          </div>
        </div>

        <!-- 1) Employee KPI -->
        <div class="card">
          <div class="card-header">
            <h2><span class="step">1</span>Employee: KPI</h2>
            <span class="card-tag">Employee side</span>
          </div>
          <p class="card-desc">
            Employee submits a private KPI value. The smart contract never sees this number in clear.
          </p>

          <label>KPI value (integer)</label>
          <input id="kpiValue" type="number" min="0" max="1000000" value="1000" />

          <div class="row">
            <button id="btnSubmitKPI" class="btn">Encrypt &amp; Submit KPI</button>
          </div>
          <div id="kpiStatus" class="status"></div>
          <pre id="kpiHandleOut" style="display:none;">â€”</pre>
        </div>

        <!-- 2) HR Target -->
        <div class="card">
          <div class="card-header">
            <h2><span class="step">2</span>HR: Target</h2>
            <span class="card-tag">HR side</span>
          </div>
          <p class="card-desc">
            HR defines a private target KPI for an employee address. Both KPI and target remain encrypted.
          </p>

          <label>Employee address</label>
          <input id="hrEmployeeAddr" type="text" placeholder="0x..." />

          <label>Target KPI value (integer)</label>
          <input id="targetValue" type="number" min="0" max="1000000" value="1000" />

          <div class="row">
            <button id="btnSubmitTarget" class="btn">Encrypt &amp; Submit Target</button>
          </div>
          <div id="targetStatus" class="status"></div>
          <pre id="targetHandleOut" style="display:none;">â€”</pre>
        </div>

        <!-- 3) Compute -->
        <div class="card">
          <div class="card-header">
            <h2><span class="step">3</span>Compute Bonus</h2>
            <span class="card-tag">Onâ€‘chain compute</span>
          </div>
          <p class="card-desc">
            Contract homomorphically compares encrypted KPI and target, returning only a bonus code from 0 to 3.
          </p>

          <label>Employee address (compute for)</label>
          <input id="computeEmployeeAddr" type="text" placeholder="0x..." />

          <div class="row">
            <button id="btnComputeBonus" class="btn">Compute Bonus</button>
          </div>
          <div id="computeStatus" class="status"></div>
          <pre id="bonusHandleOut" style="display:none;">â€”</pre>
        </div>

        <!-- 4) Make public -->
        <div class="card">
          <div class="card-header">
            <h2><span class="step">4</span>Make Bonus Public</h2>
            <span class="card-tag">Optâ€‘in reveal</span>
          </div>
          <p class="card-desc">
            Employee chooses when to reveal the last computed bonus level. The underlying KPI is never exposed.
          </p>

          <div class="row">
            <button id="btnMakePublic" class="btn">Make My Bonus Public</button>
          </div>
          <div id="makePublicStatus" class="status"></div>
        </div>

        <!-- 5) Get & decrypt -->
        <div class="card">
          <div class="card-header">
            <h2><span class="step">5</span>Get &amp; Decrypt</h2>
            <span class="card-tag">Public view</span>
          </div>
          <p class="card-desc">
            Fetch the bonus handle for an address that opted in, then run public decrypt to see the level.
          </p>

          <label>Address to fetch bonus for</label>
          <input id="fetchAddr" type="text" placeholder="0x..." />

          <div class="row" style="margin-top:8px;">
            <button id="btnGetHandle" class="btn">Get Bonus Handle</button>
            <button id="btnDecrypt" class="btn">Public Decrypt</button>
          </div>

          <div id="decryptStatus" class="status"></div>
          <div id="bonusResult" class="result" style="display:none;"></div>
        </div>
      </div>

      <!-- ÐŸÑ€Ð°Ð²Ð¸Ð¹ ÑÑ‚Ð¾Ð²Ð¿Ñ‡Ð¸Ðº: summary & bonus legend -->
      <aside class="kpi-panel">
        <h3 class="kpi-title">Bonus levels (0â€“3)</h3>
        <div class="kpi-grid">
          <div class="kpi-card">
            <div class="kpi-label">Level 0</div>
            <div class="kpi-value">No bonus</div>
            <div class="kpi-hint">Under target.</div>
            <div class="kpi-badge neutral">Baseline</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">Level 1</div>
            <div class="kpi-value">Base bonus</div>
            <div class="kpi-hint">Meets expectations.</div>
            <div class="kpi-badge green">On target</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">Level 2</div>
            <div class="kpi-value">Strong bonus</div>
            <div class="kpi-hint">Above expectations.</div>
            <div class="kpi-badge amber">High impact</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">Level 3</div>
            <div class="kpi-value">Top bonus</div>
            <div class="kpi-hint">Outstanding performance.</div>
            <div class="kpi-badge rose">Top 1â€“5%</div>
          </div>
        </div>

        <div class="bonus-bar">
          <div class="bonus-bar-label">Bonus ladder</div>
          <div class="bonus-bar-track">
            <div class="bonus-bar-steps">
              <span class="bonus-step bonus-step--3">3 Â· Top</span>
              <span class="bonus-step bonus-step--2">2 Â· Strong</span>
              <span class="bonus-step bonus-step--1">1 Â· Base</span>
              <span class="bonus-step bonus-step--0">0 Â· None</span>
            </div>
          </div>
        </div>
      </aside>
    </div>

    <footer>
      Console logs show detailed steps.
      Local whitepaper: <code>/mnt/data/fhevm_whitepaper_new.pdf</code>
      <span class="tag">FHEVM Â· KPI privacy</span>
    </footer>
  </div>
<script type="module" src="./index.js"></script>

</body>
</html>
