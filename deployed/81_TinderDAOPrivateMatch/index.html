<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>TinderDAO — Private Match</title>
  <link rel="stylesheet" href="./index.css" />
 
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">TD</div>
        <div>
          <h1>TinderDAO — Private Match</h1>
          <div class="small">Encrypted profiles & preferences → homomorphic matching → no data leaks</div>
        </div>
      </div>
      <div>
        <button id="btnConnect" class="btn">Connect Wallet</button>
      </div>
    </header>

    <section class="card col">
      <h3>1) Publish Encrypted Profile</h3>
      <label>Age</label>
      <input id="profileAge" type="number" min="18" max="120" value="28"/>
      <label>Gender (0=unknown,1=male,2=female,3=other)</label>
      <input id="profileGender" type="number" min="0" max="3" value="1"/>
      <label>Interests bitmask (0..65535) — e.g., 1=music,2=movies,4=sports...</label>
      <input id="profileInterests" type="number" min="0" max="65535" value="5"/>
      <label>Region (numeric code)</label>
      <input id="profileRegion" type="number" min="0" max="65535" value="101"/>
      <div style="display:flex;gap:10px;margin-top:12px">
        <button id="btnPublish" class="btn">Encrypt & Publish</button>
        <div id="pubStatus" class="small"></div>
      </div>
    </section>

    <aside class="card right">
      <h3>Actions & Output</h3>
      <div style="display:flex;flex-direction:column;gap:8px">
        <div>
          <label>Profile ID (for later)</label>
          <input id="profileId" type="number" min="1" value="1"/>
        </div>
        <div>
          <label>Preference ID</label>
          <input id="prefId" type="number" min="1" value="1"/>
        </div>
        <div style="display:flex;gap:8px;margin-top:6px">
          <button id="btnGetHandle" class="btn">Compute Match</button>
          <button id="btnMakePublic" class="btn" style="background:linear-gradient(90deg,#f97316,#fb7185);color:white">Make Public</button>
        </div>
      </div>
      <div style="margin-top:12px">
        <label>Latest Output</label>
        <pre id="log">—</pre>
      </div>
    </aside>

    <section class="card col">
      <h3>2) Submit Encrypted Preference</h3>
      <label>Min Age</label>
      <input id="prefMinAge" type="number" min="18" max="120" value="24"/>
      <label>Max Age</label>
      <input id="prefMaxAge" type="number" min="18" max="120" value="35"/>
      <label>Desired Gender (255 = any)</label>
      <input id="prefGender" type="number" min="0" max="255" value="255"/>
      <label>Interests Mask (bitmask)</label>
      <input id="prefInterests" type="number" min="0" max="65535" value="1"/>
      <label>Region (65535 = any)</label>
      <input id="prefRegion" type="number" min="0" max="65535" value="65535"/>
      <div style="display:flex;gap:10px;margin-top:12px">
        <button id="btnSubmitPref" class="btn">Encrypt & Submit Pref</button>
        <div id="prefStatus" class="small"></div>
      </div>
    </section>

    <section class="card col">
      <h3>3) Decrypt Result (Public)</h3>
      <div class="small">After computing match, select ProfileID & PrefID, click Make Public (owner or requester), then Public Decrypt.</div>
      <div style="display:flex;gap:8px;margin-top:10px">
        <button id="btnPublicDecrypt" class="btn">Public Decrypt</button>
        <div id="decStatus" class="small"></div>
      </div>
      <div style="margin-top:12px">
        <label>Decrypted Result</label>
        <pre id="decryptOut">—</pre>
      </div>
    </section>

    <footer>Built with Zama FHEVM • Relayer SDK 0.3.0 • Ethers v6</footer>
  </div>

  <script type="module" src="index.js"></script>
 </body>
</html>